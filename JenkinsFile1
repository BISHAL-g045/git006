pipeline {
agent any
environment {
        DOCKERHUB_CREDENTIAL = credentials('mydockerhub')
    }

stages {
  
  stage("Build Nodejs Image") {
    steps {
        bat 'docker build -t nodejs .'
        bat 'docker ps'
    }
}
  
  stage ("Delivery of Image to Docker Hub") {
    steps {
      bat "docker login -u ${DOCKERHUB_CREDENTIAL_USR} -p ${DOCKERHUB_CREDENTIAL_PSW}"
      bat 'docker image tag nodejs bishalg001/nodejs:1.0'
      bat 'docker --debug push bishalg001/nodejs:1.0'
    }
  }
    }
  }
